<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Go å­¦ä¹ é—¨æˆ· - Learn4Go</title>
    <!-- Bootstrap 5.3 CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts: Inter and Fira Code -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f8f9fa;
        color: #212529;
      }

      code {
        font-family: "Fira Code", monospace;
        background-color: #e9ecef;
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.9em;
      }

      pre code {
        background-color: transparent;
        padding: 0;
      }

      pre {
        background-color: #2d3436;
        color: #dfe6e9;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
      }

      .navbar {
        background-color: #ffffff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .sidebar {
        background-color: #ffffff;
        border-right: 1px solid #dee2e6;
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        padding-top: 56px;
        width: 280px;
        overflow-y: auto;
      }

      .main-content {
        margin-left: 280px;
        padding: 2rem;
        padding-top: calc(56px + 2rem);
      }

      @media (max-width: 767.98px) {
        .sidebar {
          position: relative;
          height: auto;
          width: 100%;
          padding-top: 1rem;
          border-right: none;
          border-bottom: 1px solid #dee2e6;
        }
        .main-content {
          margin-left: 0;
          padding-top: 2rem;
        }
      }

      .chapter-nav .nav-link {
        color: #495057;
        padding: 0.75rem 1rem;
        border-left: 3px solid transparent;
        font-size: 0.9rem;
      }

      .chapter-nav .nav-link:hover {
        background-color: #f1f3f5;
        border-left-color: #dee2e6;
      }

      .chapter-nav .nav-link.active {
        font-weight: 500;
        color: #0d6efd;
        border-left-color: #0d6efd;
      }

      .example-list .list-group-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .progress-tracker {
        background-color: #ffffff;
        padding: 1.5rem;
        border-radius: 0.5rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .completion-check {
        color: #198754;
        font-weight: bold;
      }

      .section-header {
        color: #6c757d;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding: 1rem 1rem 0.5rem;
        margin-top: 1rem;
      }

      .card-project {
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .card-project:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="#">ğŸ¹ Learn4Go</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" href="portal.html">å­¦ä¹ é—¨æˆ·</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="projects.html">é¡¹ç›®å®æˆ˜</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">é¦–é¡µ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="todo-login.html">ç™»å½•æ¼”ç¤º</a>
            </li>
          </ul>
          <div class="d-flex align-items-center">
            <span class="text-muted small me-2">æœåŠ¡çŠ¶æ€:</span>
            <span
              id="status-todoapi"
              class="badge bg-secondary me-1"
              title="æ£€æµ‹ä¸­..."
              >TodoAPI</span
            >
            <span
              id="status-gateway"
              class="badge bg-secondary"
              title="æ£€æµ‹ä¸­..."
              >Gateway</span
            >
          </div>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
          <div class="position-sticky pt-3">
            <div class="section-header">åŸºç¡€ç« èŠ‚</div>
            <ul class="nav flex-column chapter-nav" id="chapter-list"></ul>

            <div class="section-header">å¼€å‘ç¯å¢ƒä¸æ¡†æ¶</div>
            <ul class="nav flex-column chapter-nav" id="framework-list"></ul>

            <div class="section-header">é¡¹ç›®å®æˆ˜</div>
            <ul class="nav flex-column chapter-nav" id="project-list"></ul>
          </div>
        </nav>

        <main class="main-content">
          <div class="progress-tracker">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="mb-0">å­¦ä¹ è¿›åº¦</h5>
              <button
                class="btn btn-sm btn-outline-secondary"
                onclick="resetProgress()"
              >
                é‡ç½®è¿›åº¦
              </button>
            </div>
            <div class="progress" style="height: 20px">
              <div
                id="progress-bar"
                class="progress-bar bg-success"
                role="progressbar"
                style="width: 0%"
              >
                0%
              </div>
            </div>
            <small class="text-muted mt-2 d-block" id="progress-detail"
              >å·²å®Œæˆ 0 / 0 ç« èŠ‚</small
            >
          </div>

          <div id="content-display">
            <h1>æ¬¢è¿æ¥åˆ° Go å­¦ä¹ é—¨æˆ·</h1>
            <p class="lead">ä»å·¦ä¾§å¯¼èˆªé€‰æ‹©ç« èŠ‚å¼€å§‹ä½ çš„ Go è¯­è¨€å­¦ä¹ ä¹‹æ—…ã€‚</p>
            <p>å­¦ä¹ è¿›åº¦ä¼šè‡ªåŠ¨ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­ã€‚</p>

            <div class="row mt-4">
              <div class="col-md-4 mb-3">
                <div class="card card-project h-100">
                  <div class="card-body">
                    <h5 class="card-title">ğŸ“š è¯­è¨€åŸºç¡€</h5>
                    <p class="card-text text-muted">
                      ä»å˜é‡ã€æ§åˆ¶æµåˆ°å¹¶å‘ï¼Œ10ä¸ªæ ¸å¿ƒç« èŠ‚å¸¦ä½ æŒæ¡ Go åŸºç¡€ã€‚
                    </p>
                    <a
                      href="#"
                      class="btn btn-outline-primary btn-sm"
                      onclick="scrollToSection('chapter-list')"
                      >å¼€å§‹å­¦ä¹ </a
                    >
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card card-project h-100">
                  <div class="card-body">
                    <h5 class="card-title">ğŸ› ï¸ å¼€å‘æ¡†æ¶</h5>
                    <p class="card-text text-muted">
                      Ginã€gRPCã€ä¸­é—´ä»¶ç­‰ Go ç”Ÿæ€æ ¸å¿ƒæ¡†æ¶ä»‹ç»ä¸å®è·µã€‚
                    </p>
                    <a
                      href="#"
                      class="btn btn-outline-primary btn-sm"
                      onclick="scrollToSection('framework-list')"
                      >æ¢ç´¢æ¡†æ¶</a
                    >
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card card-project h-100">
                  <div class="card-body">
                    <h5 class="card-title">ğŸš€ é¡¹ç›®å®æˆ˜</h5>
                    <p class="card-text text-muted">
                      CLIå·¥å…·ã€REST APIã€å¹¶å‘å¤„ç†ç­‰çœŸå®é¡¹ç›®ç»ƒä¹ ã€‚
                    </p>
                    <a
                      href="#"
                      class="btn btn-outline-primary btn-sm"
                      onclick="scrollToSection('project-list')"
                      >åŠ¨æ‰‹å®è·µ</a
                    >
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card card-project h-100">
                  <div class="card-body">
                    <h5 class="card-title">ğŸ” å®‰å…¨æ¼”ç¤º</h5>
                    <p class="card-text text-muted">
                      ä½“éªŒ JWT + RBAC + Refresh è‡ªåŠ¨åˆ·æ–°æµç¨‹ã€‚
                    </p>
                    <ul class="small text-muted mb-3">
                      <li>é»˜è®¤è´¦æˆ·ï¼šadmin@example.com / admin123</li>
                      <li>è‡ªåŠ¨å¤„ç† 401 â†’ refresh â†’ é‡è¯•</li>
                      <li>åç«¯æœªå¯åŠ¨æ—¶ï¼šè¿è¡Œ <code>./start-local.sh</code></li>
                      <li>éœ€è¦çœŸå®åç«¯æˆ–ä½¿ç”¨ Mockï¼ˆlogin.html?mock=trueï¼‰</li>
                    </ul>
                    <div class="d-flex flex-wrap gap-2">
                      <a class="btn btn-primary btn-sm" href="todo-login.html"
                        >çœŸå®åç«¯</a
                      >
                      <a
                        class="btn btn-outline-secondary btn-sm"
                        href="login.html?mock=true"
                        >Mock æ¼”ç¤º</a
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <div class="card card-project h-100">
                  <div class="card-body">
                    <h5 class="card-title">ğŸ§± TinyGee æ¡†æ¶</h5>
                    <p class="card-text text-muted">
                      ä»“åº“å†…æ‰‹æ’¸çš„æœ€å° Web
                      æ¡†æ¶ï¼šè·¯ç”±ã€ä¸­é—´ä»¶ã€æ¨¡æ¿ã€JWT/RBACã€é™æµã€‚
                    </p>
                    <ul class="small text-muted mb-3">
                      <li>æ–‡æ¡£ï¼š<code>docs/tinygee/quickstart.md</code></li>
                      <li>
                        Demoï¼š<code
                          >go run ./cmd/tinygee-demo --port :9999</code
                        >
                      </li>
                      <li>ç¤ºä¾‹ï¼šæŸ¥çœ‹ä¸‹æ–¹ç¤ºä¾‹åˆ—è¡¨ï¼ˆTinyGee æ ‡ç­¾ï¼‰</li>
                    </ul>
                    <a
                      class="btn btn-outline-primary btn-sm"
                      href="javascript:void(0)"
                      onclick="copyToClipboard('go run ./cmd/tinygee-demo --port :9999', this)"
                      >å¤åˆ¶ Demo å‘½ä»¤</a
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <hr class="my-5" />

          <h4>å¯è¿è¡Œç¤ºä¾‹</h4>
          <p class="text-muted">è¿™äº›ç¤ºä¾‹å¯ä»¥ç›´æ¥è¿è¡ŒæŸ¥çœ‹ Go ä»£ç æ•ˆæœã€‚</p>
          <p class="small text-muted">
            æ ‡è®°è¯´æ˜ï¼š<span class="badge bg-info text-dark"
              >ğŸŒ éœ€å¤–ç½‘/httpbin</span
            >
            <span class="badge bg-secondary">æœ¬åœ°</span>
            <span class="badge bg-warning text-dark">Mock</span>
          </p>
          <div class="btn-group mb-3" role="group" aria-label="ç¤ºä¾‹è¿‡æ»¤">
            <button
              class="btn btn-sm btn-outline-primary active"
              data-filter="all"
              onclick="setExampleFilter('all', this)"
            >
              å…¨éƒ¨
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              data-filter="local"
              onclick="setExampleFilter('local', this)"
            >
              æœ¬åœ°
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              data-filter="network"
              onclick="setExampleFilter('network', this)"
            >
              éœ€å¤–ç½‘
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              data-filter="mock"
              onclick="setExampleFilter('mock', this)"
            >
              Mock
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              data-filter="tinygee"
              onclick="setExampleFilter('tinygee', this)"
            >
              TinyGee
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              data-filter="io"
              onclick="setExampleFilter('io', this)"
            >
              IO
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              data-filter="net"
              onclick="setExampleFilter('net', this)"
            >
              ç½‘ç»œ
            </button>
            <button
              class="btn btn-sm btn-outline-primary"
              data-filter="generic"
              onclick="setExampleFilter('generic', this)"
            >
              æ³›å‹
            </button>
          </div>
          <div class="d-flex align-items-center gap-2 mb-2">
            <button
              class="btn btn-sm btn-outline-secondary"
              onclick="copyToClipboard('open docs/tinygee/quickstart.md', this)"
            >
              ğŸ“„ TinyGee æ–‡æ¡£
            </button>
            <button
              class="btn btn-sm btn-outline-secondary"
              onclick="copyToClipboard('open docs/IOæ“ä½œæŒ‡å—.md', this)"
            >
              ğŸ“„ IO æ–‡æ¡£
            </button>
            <button
              class="btn btn-sm btn-outline-secondary"
              onclick="copyToClipboard('open docs/Goå·¥å…·é“¾.md', this)"
            >
              ğŸ“„ å·¥å…·é“¾æ–‡æ¡£
            </button>
            <button
              class="btn btn-sm btn-outline-secondary"
              onclick="copyToClipboard('open docs/GoåŸºç¡€é€ŸæŸ¥.md', this)"
            >
              ğŸ“„ åŸºç¡€é€ŸæŸ¥
            </button>
          </div>
          <div class="list-group example-list" id="example-list"></div>
        </main>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="config.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // æœåŠ¡é…ç½®ï¼ˆDocker å’Œæœ¬åœ°å¼€å‘ä½¿ç”¨ä¸åŒçš„å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼‰
        const isDocker =
          window.location.hostname !== "localhost" &&
          window.location.hostname !== "127.0.0.1";
        const baseTodoApi =
          window.AppConfig?.todoApiBaseUrl ||
          (isDocker ? "/api" : "http://127.0.0.1:8080");

        const services = {
          todoapi: {
            url: baseTodoApi + "/v1/todos",
            healthUrl: baseTodoApi + "/healthz",
            status: "checking",
          },
          gateway: {
            url: isDocker
              ? "/api"
              : window.AppConfig?.gatewayUrl || "http://127.0.0.1:8888",
            healthUrl: isDocker ? "/health" : "http://127.0.0.1:8888/health",
            status: "checking",
          },
        };

        // ç« èŠ‚æ•°æ®
        const chapters = [
          {
            id: "ch01",
            name: "å¿«é€Ÿå¼€å§‹ä¸åŸºæœ¬è¯­æ³•",
            file: "01_å¿«é€Ÿå¼€å§‹ä¸åŸºæœ¬è¯­æ³•.md",
          },
          {
            id: "ch02",
            name: "å˜é‡ã€å¸¸é‡ã€ç±»å‹",
            file: "02_å˜é‡_å¸¸é‡_ç±»å‹.md",
          },
          { id: "ch03", name: "æµç¨‹æ§åˆ¶", file: "03_æµç¨‹æ§åˆ¶.md" },
          { id: "ch04", name: "å‡½æ•°ä¸é”™è¯¯å¤„ç†", file: "04_å‡½æ•°ä¸é”™è¯¯å¤„ç†.md" },
          { id: "ch05", name: "æ•°ç»„ã€åˆ‡ç‰‡ã€Map", file: "05_æ•°ç»„_åˆ‡ç‰‡_map.md" },
          {
            id: "ch06",
            name: "ç»“æ„ä½“ã€æ–¹æ³•ã€ç»„åˆ",
            file: "06_ç»“æ„ä½“_æ–¹æ³•_ç»„åˆ.md",
          },
          { id: "ch07", name: "æ¥å£ä¸å¤šæ€", file: "07_æ¥å£_å¤šæ€.md" },
          {
            id: "ch08",
            name: "å¹¶å‘: goroutineä¸channel",
            file: "08_å¹¶å‘_goroutine_channel.md",
          },
          { id: "ch09", name: "åŒ…ä¸æ¨¡å—ç®¡ç†", file: "09_åŒ…_æ¨¡å—ç®¡ç†.md" },
          { id: "ch10", name: "æµ‹è¯•ä¸åŸºå‡†", file: "10_æµ‹è¯•ä¸åŸºå‡†.md" },
        ];

        const frameworks = [
          {
            id: "fw01",
            name: "å·¥å…·é“¾ä¸ä¾èµ–ç®¡ç†",
            file: "01_å·¥å…·é“¾_ä¾èµ–ç®¡ç†.md",
          },
          {
            id: "fw02",
            name: "Webæ¡†æ¶å¯¹æ¯”",
            file: "02_Webæ¡†æ¶å¯¹æ¯”_Gin_Echo_Fiber.md",
          },
          {
            id: "fw03",
            name: "gRPCä¸å¾®æœåŠ¡å…¥é—¨",
            file: "03_gRPC_ä¸å¾®æœåŠ¡å…¥é—¨.md",
          },
          {
            id: "fw04",
            name: "æ—¥å¿—ã€é…ç½®ä¸ä¸­é—´ä»¶",
            file: "04_æ—¥å¿—_é…ç½®_ä¸­é—´ä»¶.md",
          },
        ];

        const projects = [
          {
            id: "pj01",
            name: "æ‰¹é‡é‡å‘½å CLI",
            cmd: "go run ./cmd/batchrename --help",
          },
          { id: "pj02", name: "TODO REST API", cmd: "go run ./cmd/todoapi" },
          { id: "pj03", name: "æ—¥å¿—ZIPå½’æ¡£", cmd: "go run ./cmd/logzip" },
          {
            id: "pj04",
            name: "Worker Pool å¹¶å‘",
            cmd: "go run ./examples/workerpool",
          },
          {
            id: "pj05",
            name: "API ç½‘å…³ (æ ‡å‡†åº“)",
            cmd: "go run ./examples/gateway/stdlib",
          },
          {
            id: "pj06",
            name: "API ç½‘å…³ (Gin)",
            cmd: "go run ./examples/gateway/gin",
          },
        ];

        const examples = [
          {
            name: "Hello World",
            file: "examples/hello/main.go",
            cmd: "go run ./examples/hello",
            desc: "æœ€ç®€å•çš„Goç¨‹åº",
            network: false,
            mock: false,
          },
          {
            name: "FizzBuzz",
            file: "examples/fizzbuzz/main.go",
            cmd: "go run ./examples/fizzbuzz",
            desc: "ç»å…¸ç¼–ç¨‹ç»ƒä¹ ",
            network: false,
            mock: false,
          },
          {
            name: "Worker Pool",
            file: "examples/workerpool/main.go",
            cmd: "go run ./examples/workerpool",
            desc: "å¹¶å‘ä»»åŠ¡æ± æ¨¡å¼",
            network: false,
            mock: false,
          },
          {
            name: "gRPC Server",
            file: "examples/grpc/server/main.go",
            cmd: "go run ./examples/grpc/server",
            desc: "gRPCæœåŠ¡ç«¯ç¤ºä¾‹",
            network: false,
            mock: false,
          },
          {
            name: "gRPC Client",
            file: "examples/grpc/client/main.go",
            cmd: "go run ./examples/grpc/client",
            desc: "gRPCå®¢æˆ·ç«¯ç¤ºä¾‹",
            network: false,
            mock: false,
          },
          {
            name: "Gateway (stdlib)",
            file: "examples/gateway/stdlib/main.go",
            cmd: "go run ./examples/gateway/stdlib",
            desc: "æ ‡å‡†åº“åå‘ä»£ç†",
            network: false,
            mock: false,
          },
          {
            name: "Gateway (Gin)",
            file: "examples/gateway/gin/main.go",
            cmd: "go run ./examples/gateway/gin",
            desc: "Ginæ¡†æ¶ç½‘å…³",
            network: false,
            mock: false,
          },
          {
            name: "HTTP Trace",
            file: "examples/java_compare/httptrace/main.go",
            cmd: "go run ./examples/java_compare/httptrace",
            desc: "httptrace è§‚æµ‹ DNS/è¿æ¥/é¦–å­—èŠ‚ï¼ˆéœ€ httpbinï¼‰",
            network: true,
            mock: false,
          },
          {
            name: "URL Encode",
            file: "examples/java_compare/urlencode/main.go",
            cmd: "go run ./examples/java_compare/urlencode",
            desc: "net/url ç¼–è§£ç ï¼Œå¯¹ç…§ URLEncoder",
            network: false,
            mock: false,
          },
          {
            name: "Ticker é™é€Ÿ",
            file: "examples/java_compare/ticker_rate_limit/main.go",
            cmd: "go run ./examples/java_compare/ticker_rate_limit",
            desc: "time.Ticker èŠ‚æµï¼Œæœ¬åœ°è¿è¡Œ",
            network: false,
            mock: false,
          },
          {
            name: "ä¸­é—´ä»¶é“¾",
            file: "examples/java_compare/http_middleware/main.go",
            cmd: "go run ./examples/java_compare/http_middleware",
            desc: "net/http ä¸­é—´ä»¶é“¾ï¼Œæœ¬åœ°",
            network: false,
            mock: false,
          },
          {
            name: "IO bufio",
            file: "examples/io/bufio_rw/main.go",
            cmd: "go run ./examples/io/bufio_rw",
            desc: "bufio è¯»å†™ç¤ºä¾‹",
            network: false,
            mock: false,
            io: true,
          },
          {
            name: "IO copy",
            file: "examples/io/copy_file/main.go",
            cmd: "go run ./examples/io/copy_file",
            desc: "io.Copy æ–‡ä»¶æ‹·è´",
            network: false,
            mock: false,
            io: true,
          },
          {
            name: "IO zip",
            file: "examples/io/zip_basic/main.go",
            cmd: "go run ./examples/io/zip_basic",
            desc: "archive/zip å†™è¯»",
            network: false,
            mock: false,
            io: true,
          },
          {
            name: "IO json/xml",
            file: "examples/io/json_xml/main.go",
            cmd: "go run ./examples/io/json_xml",
            desc: "encoding/json & xml",
            network: false,
            mock: false,
            io: true,
          },
          {
            name: "ç½‘ç»œ TCP Echo",
            file: "examples/network/tcp_echo/main.go",
            cmd: "go run ./examples/network/tcp_echo",
            desc: "net.TCP echoï¼ˆæœ¬åœ°ï¼‰",
            network: false,
            mock: false,
            net: true,
          },
          {
            name: "ç½‘ç»œ UDP Echo",
            file: "examples/network/udp_echo/main.go",
            cmd: "go run ./examples/network/udp_echo",
            desc: "net.UDP echoï¼ˆæœ¬åœ°ï¼‰",
            network: false,
            mock: false,
            net: true,
          },
          {
            name: "HTTP Client + ctx",
            file: "examples/network/http_client_ctx/main.go",
            cmd: "go run ./examples/network/http_client_ctx",
            desc: "http.Client + context è¶…æ—¶ï¼ˆéœ€å¤–ç½‘ï¼‰",
            network: true,
            mock: false,
            net: true,
          },
          {
            name: "æ³›å‹ Stack",
            file: "examples/basics/generic_stack/main.go",
            cmd: "go run ./examples/basics/generic_stack",
            desc: "Go1.18+ æ³›å‹ç¤ºä¾‹",
            network: false,
            mock: false,
            generic: true,
          },
          {
            name: "TinyGee Day1",
            file: "examples/tinygee/day1/main.go",
            cmd: "go run ./examples/tinygee/day1",
            desc: "TinyGee åŸºç¡€è·¯ç”±ä¸ JSON/String",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "TinyGee è·¯ç”±åŠ¨æ€",
            file: "examples/tinygee/day3/main.go",
            cmd: "go run ./examples/tinygee/day3",
            desc: ":param ä¸ *filepath åŠ¨æ€è·¯ç”±",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "TinyGee ä¸­é—´ä»¶",
            file: "examples/tinygee/day5/main.go",
            cmd: "go run ./examples/tinygee/day5",
            desc: "åˆ†ç»„+ä¸­é—´ä»¶é“¾",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "TinyGee æ¨¡æ¿/é™æ€",
            file: "examples/tinygee/day6/main.go",
            cmd: "go run ./examples/tinygee/day6",
            desc: "æ¨¡æ¿æ¸²æŸ“ä¸é™æ€æ–‡ä»¶",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "TinyGee Recover",
            file: "examples/tinygee/day7/main.go",
            cmd: "go run ./examples/tinygee/day7",
            desc: "Panic Recover æ¼”ç¤º",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "TinyGee JWT/RBAC",
            file: "examples/tinygee/day9auth/main.go",
            cmd: "go run ./examples/tinygee/day9auth",
            desc: "JWT + RBAC ä¸­é—´ä»¶ç¤ºä¾‹",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "TinyGee é™æµ",
            file: "examples/tinygee/day9rl/main.go",
            cmd: "go run ./examples/tinygee/day9rl",
            desc: "æ»‘åŠ¨çª—å£é™æµæ¼”ç¤º",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "TinyGee Fullstack",
            file: "examples/tinygee/fullstack/main.go",
            cmd: "go run ./examples/tinygee/fullstack",
            desc: "æ¨¡æ¿+JWT+RBAC+é™æµ+metrics",
            network: false,
            mock: false,
            tinygee: true,
          },
          {
            name: "Login Mock æ¼”ç¤º",
            file: "web/login.html?mock=true",
            cmd: "open http://localhost:8000/login.html?mock=true",
            desc: "å‰ç«¯ Mock ç™»å½•æ¼”ç¤ºï¼Œæ— éœ€åç«¯",
            network: false,
            mock: true,
          },
        ];

        let exampleFilter = "all";

        // DOM å…ƒç´ 
        const chapterList = document.getElementById("chapter-list");
        const frameworkList = document.getElementById("framework-list");
        const projectList = document.getElementById("project-list");
        const exampleList = document.getElementById("example-list");
        const contentDisplay = document.getElementById("content-display");
        const progressBar = document.getElementById("progress-bar");
        const progressDetail = document.getElementById("progress-detail");

        // çŠ¶æ€ç®¡ç†
        let completedItems =
          JSON.parse(localStorage.getItem("learn4goProgress")) || [];
        const totalItems =
          chapters.length + frameworks.length + projects.length;

        // æœåŠ¡çŠ¶æ€æ£€æµ‹
        async function checkServices() {
          const updateBadge = (id, status) => {
            const badge = document.getElementById(id);
            if (!badge) return;
            badge.className = `badge ${
              status === "online" ? "bg-success" : "bg-danger"
            } me-1`;
            badge.title = status === "online" ? "æœåŠ¡åœ¨çº¿" : "æœåŠ¡ç¦»çº¿";
          };

          for (const [key, service] of Object.entries(services)) {
            try {
              const controller = new AbortController();
              const timeoutId = setTimeout(() => controller.abort(), 3000);
              // Use HEAD request for lighter weight, avoid no-cors which returns opaque response
              const response = await fetch(service.healthUrl, {
                method: "HEAD",
                signal: controller.signal,
                cache: "no-store",
              });
              clearTimeout(timeoutId);
              // Check if response is successful (2xx status)
              service.status = response.ok ? "online" : "offline";
              updateBadge(`status-${key}`, service.status);
            } catch (e) {
              // Network error, CORS error, or timeout - all indicate offline
              service.status = "offline";
              updateBadge(`status-${key}`, "offline");
            }
          }
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        window.copyToClipboard = async function (text, btn) {
          try {
            await navigator.clipboard.writeText(text);
            const original = btn.innerHTML;
            btn.innerHTML = "âœ… å·²å¤åˆ¶";
            btn.classList.replace("btn-outline-secondary", "btn-success");
            setTimeout(() => {
              btn.innerHTML = original;
              btn.classList.replace("btn-success", "btn-outline-secondary");
            }, 1500);
          } catch (e) {
            alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶: " + text);
          }
        };

        window.runExample = function (cmd) {
          alert(`è¿è¡Œå‘½ä»¤:\n${cmd}\n\nè¯·åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œæ­¤å‘½ä»¤ã€‚`);
        };

        window.markAsCompleted = function (itemId) {
          if (!completedItems.includes(itemId)) {
            completedItems.push(itemId);
            localStorage.setItem(
              "learn4goProgress",
              JSON.stringify(completedItems)
            );
            render();
          }
        };

        window.resetProgress = function () {
          if (confirm("ç¡®å®šè¦é‡ç½®æ‰€æœ‰å­¦ä¹ è¿›åº¦å—ï¼Ÿ")) {
            completedItems = [];
            localStorage.removeItem("learn4goProgress");
            render();
          }
        };

        window.scrollToSection = function (sectionId) {
          document
            .getElementById(sectionId)
            .scrollIntoView({ behavior: "smooth" });
        };

        // æ¸²æŸ“å‡½æ•°
        function renderNavList(items, container, prefix) {
          container.innerHTML = "";
          items.forEach((item, index) => {
            const isCompleted = completedItems.includes(item.id);
            container.innerHTML += `
                        <li class="nav-item">
                            <a class="nav-link d-flex justify-content-between" href="#" data-item-id="${
                              item.id
                            }" data-item-name="${
              item.name
            }" data-item-type="${prefix}" data-item-cmd="${item.cmd || ""}">
                                <span>${index + 1}. ${item.name}</span>
                                ${
                                  isCompleted
                                    ? '<span class="completion-check">âœ”</span>'
                                    : ""
                                }
                            </a>
                        </li>
                    `;
          });
        }

        function setExampleFilter(filter, btn) {
          exampleFilter = filter;
          document
            .querySelectorAll("[data-filter]")
            .forEach((b) => b.classList.remove("active"));
          if (btn) btn.classList.add("active");
          renderExamples();
        }

        function renderExamples() {
          exampleList.innerHTML = "";
          examples.forEach((example) => {
            if (exampleFilter === "local" && example.network) return;
            if (exampleFilter === "network" && !example.network) return;
            if (exampleFilter === "mock" && !example.mock) return;
            if (exampleFilter === "tinygee" && !example.tinygee) return;
            if (exampleFilter === "io" && !example.io) return;
            if (exampleFilter === "net" && !example.net) return;
            if (exampleFilter === "generic" && !example.generic) return;
            let badge = example.network
              ? '<span class="badge bg-info text-dark ms-1">ğŸŒ</span>'
              : '<span class="badge bg-secondary ms-1">æœ¬åœ°</span>';
            if (example.mock) {
              badge +=
                '<span class="badge bg-warning text-dark ms-1">Mock</span>';
            }
            if (example.tinygee) {
              badge += '<span class="badge bg-dark ms-1">TinyGee</span>';
            }
            if (example.io) {
              badge += '<span class="badge bg-primary ms-1">IO</span>';
            }
            if (example.net) {
              badge += '<span class="badge bg-success ms-1">Net</span>';
            }
            if (example.generic) {
              badge += '<span class="badge bg-secondary ms-1">æ³›å‹</span>';
            }
            exampleList.innerHTML += `
                        <div class="list-group-item">
                            <div class="flex-grow-1">
                                <h6 class="mb-1">${example.name} ${badge}</h6>
                                <small class="text-muted d-block">${example.desc}</small>
                                <code class="small">${example.file}</code>
                            </div>
                            <div class="btn-group ms-2">
                                <button class="btn btn-sm btn-outline-secondary" onclick="copyToClipboard('${example.cmd}', this)">ğŸ“‹ å¤åˆ¶</button>
                                <button class="btn btn-sm btn-primary" onclick="runExample('${example.cmd}')">â–¶ è¿è¡Œ</button>
                            </div>
                        </div>
                    `;
          });
        }

        function updateProgress() {
          const completedCount = completedItems.length;
          const percentage =
            totalItems > 0
              ? Math.round((completedCount / totalItems) * 100)
              : 0;
          progressBar.style.width = `${percentage}%`;
          progressBar.textContent = `${percentage}%`;
          progressDetail.textContent = `å·²å®Œæˆ ${completedCount} / ${totalItems} ç« èŠ‚`;
        }

        function displayContent(itemId, itemName, itemType, itemCmd) {
          const isCompleted = completedItems.includes(itemId);

          let cmdHint = "";
          if (itemCmd) {
            cmdHint = `
                        <div class="alert alert-info d-flex justify-content-between align-items-center">
                            <div><strong>è¿è¡Œå‘½ä»¤:</strong> <code>${itemCmd}</code></div>
                            <button class="btn btn-sm btn-outline-primary" onclick="copyToClipboard('${itemCmd}', this)">ğŸ“‹ å¤åˆ¶</button>
                        </div>`;
          }

          contentDisplay.innerHTML = `
                    <h1>${itemName}</h1>
                    ${cmdHint}
                    <p class="lead">è¿™æ˜¯ "${itemName}" ç« èŠ‚çš„å†…å®¹åŒºåŸŸã€‚</p>
                    <pre><code>// ${itemName} ç¤ºä¾‹ä»£ç 
package main

import "fmt"

func main() {
    fmt.Println("å­¦ä¹  ${itemName}!")
}
</code></pre>
                    <hr>
                    ${
                      !isCompleted
                        ? `<button class="btn btn-success" onclick="markAsCompleted('${itemId}')">æ ‡è®°ä¸ºå·²å®Œæˆ</button>`
                        : `<p class="text-success fw-bold">âœ” ä½ å·²å®Œæˆæ­¤ç« èŠ‚ï¼</p>`
                    }
                `;
        }

        // äº‹ä»¶å¤„ç†
        function setupNavListeners(container) {
          container.addEventListener("click", function (event) {
            const link = event.target.closest("a.nav-link");
            if (link) {
              event.preventDefault();
              const itemId = link.dataset.itemId;
              const itemName = link.dataset.itemName;
              const itemType = link.dataset.itemType;
              const itemCmd = link.dataset.itemCmd;

              document
                .querySelectorAll(".chapter-nav .nav-link")
                .forEach((l) => l.classList.remove("active"));
              link.classList.add("active");

              displayContent(itemId, itemName, itemType, itemCmd);
            }
          });
        }

        // åˆå§‹åŒ–æ¸²æŸ“
        function render() {
          renderNavList(chapters, chapterList, "ch");
          renderNavList(frameworks, frameworkList, "fw");
          renderNavList(projects, projectList, "pj");
          renderExamples();
          updateProgress();
        }

        setupNavListeners(chapterList);
        setupNavListeners(frameworkList);
        setupNavListeners(projectList);

        render();
        checkServices();
        setInterval(checkServices, 30000); // æ¯30ç§’æ£€æµ‹ä¸€æ¬¡
      });
    </script>
  </body>
</html>
