# 常见问题解答 (FAQ)

## 🤔 为什么访问 API 地址显示 JSON 而不是网页？

### 问题

访问以下地址时，浏览器显示 JSON 文本而不是网页：

- `http://localhost:8080` - TODO API
- `http://localhost:8888` - Gateway

### 回答

**这是正常的！** 这些是 **REST API 服务**，不是网页服务器。

#### 什么是 REST API？

REST API 是一种**后端服务**，专门用于：

- 提供数据（JSON 格式）
- 处理业务逻辑
- 与前端或其他服务通信

#### 为什么返回 JSON？

```json
{
  "service": "Learn4Go TODO API",
  "version": "1.0",
  "endpoints": ["/todos", "/todos/{id}", "/healthz"]
}
```

这个 JSON 响应告诉你：

- ✅ 服务正在运行
- ✅ 服务名称和版本
- ✅ 可用的 API 端点

#### 如何使用这些 API？

**方式一：通过前端页面**（推荐）

```
访问: http://localhost:8000/portal.html
前端会自动调用 API 并显示友好的界面
```

**方式二：使用 curl 命令**

```bash
# 获取 TODO 列表
curl http://localhost:8080/todos

# 创建新 TODO
curl -X POST http://localhost:8080/todos \
  -H "Content-Type: application/json" \
  -d '{"title":"学习 Go 语言"}'

# 通过网关访问
curl http://localhost:8888/api/todos
```

**方式三：使用 Postman 或其他 API 工具**

- 导入 API 文档（见 `docs/API接口文档.md`）
- 可视化测试所有接口

### 对比说明

| 类型         | 地址                                | 返回内容  | 用途     |
| ------------ | ----------------------------------- | --------- | -------- |
| **前端页面** | http://localhost:8000/portal.html   | HTML 网页 | 用户访问 |
| **前端页面** | http://localhost:8000/index.html    | HTML 网页 | 用户访问 |
| **前端页面** | http://localhost:8000/projects.html | HTML 网页 | 用户访问 |
| **REST API** | http://localhost:8080               | JSON 数据 | 程序调用 |
| **REST API** | http://localhost:8888               | JSON 数据 | 程序调用 |

---

## 🔗 为什么"查看源码"按钮显示提示而不是跳转？

### 问题

在 `http://localhost:8000/projects.html` 页面点击"查看源码"按钮，显示提示框而不是打开源码。

### 回答

**这是设计如此！** 因为：

1. **前端服务器只能访问 `web/` 目录**

   - Python HTTP 服务器运行在 `web/` 目录
   - 无法访问上级目录的 `cmd/` 和 `examples/`

2. **源码在项目目录中**
   - 需要在 IDE 或文件管理器中查看
   - 提示框会告诉你源码的具体位置

### 如何查看源码？

**方式一：使用 IDE**（推荐）

```
在 VS Code 或其他 IDE 中打开项目
按照提示框中的路径找到文件
例如: cmd/todoapi/main.go
```

**方式二：使用命令行**

```bash
# 查看 TODO API 源码
cat cmd/todoapi/main.go

# 查看 Gateway 源码
cat examples/gateway/gin/main.go

# 使用 less 分页查看
less cmd/todoapi/main.go
```

**方式三：使用 GitHub**
如果项目托管在 GitHub，可以在线浏览源码。

---

## 📁 项目目录结构说明

```
Learn4Go-1/
├── web/                    # 前端文件（可通过浏览器访问）
│   ├── index.html         # ✅ http://localhost:8000/index.html
│   ├── portal.html        # ✅ http://localhost:8000/portal.html
│   └── projects.html      # ✅ http://localhost:8000/projects.html
│
├── cmd/                    # 后端可执行程序（需要在项目目录运行）
│   ├── todoapi/           # ❌ 浏览器无法直接访问
│   ├── batchrename/       # ❌ 浏览器无法直接访问
│   └── logzip/            # ❌ 浏览器无法直接访问
│
├── examples/               # 示例代码（需要在项目目录运行）
│   ├── gateway/           # ❌ 浏览器无法直接访问
│   ├── grpc/              # ❌ 浏览器无法直接访问
│   └── workerpool/        # ❌ 浏览器无法直接访问
│
└── internal/               # 内部模块（需要在项目目录查看）
    ├── todo/              # ❌ 浏览器无法直接访问
    ├── cache/             # ❌ 浏览器无法直接访问
    └── storage/           # ❌ 浏览器无法直接访问
```

---

## 🚀 正确的使用流程

### 1. 启动服务

```bash
cd /Users/xrj/GoProject/Learn4Go-1
./start-local.sh
```

### 2. 访问前端页面

```
✅ 项目首页:   http://localhost:8000/index.html
✅ 学习门户:   http://localhost:8000/portal.html
✅ 项目实战:   http://localhost:8000/projects.html
```

### 3. API 服务（返回 JSON）

```
✅ TODO API:   http://localhost:8080
✅ Gateway:    http://localhost:8888
```

### 4. 查看源码

```
✅ 在 IDE 中打开项目
✅ 按照提示框中的路径查找文件
✅ 或使用命令行: cat cmd/todoapi/main.go
```

---

## 💡 其他常见问题

### Q: 如何停止服务？

```bash
./stop-local.sh
# 或按 Ctrl+C
```

### Q: 如何查看服务日志？

```bash
tail -f todoapi.log
tail -f gateway.log
tail -f frontend.log
```

### Q: 端口被占用怎么办？

```bash
# 查看占用端口的进程
lsof -i :8080
lsof -i :8888
lsof -i :8000

# 停止进程
./stop-local.sh
```

### Q: 前端页面无法连接后端？

1. 检查后端服务是否启动：`curl http://localhost:8080/healthz`
2. 查看浏览器控制台是否有错误
3. 检查 `web/config.js` 配置是否正确

### Q: 如何切换存储模式？

```bash
# 内存模式（默认）
./start-local.sh

# SQLite 模式
./start-local.sh sqlite

# MySQL 模式（需要先启动 MySQL）
./start-local.sh mysql
```

---

## 📚 相关文档

- [README.md](../README.md) - 项目总览
- [API 文档](API接口文档.md) - TODO API 接口详细说明
- [前端使用指南](前端使用指南.md) - 前端页面功能说明
- [本地开发指南](本地开发指南.md) - 本地启动详细步骤
- [部署指南](../deployments/README.md) - Docker 部署

---

**还有其他问题？** 欢迎通过 Issue 反馈！
