# é¡¹ç›®æ–‡ä»¶è¯´æ˜

æœ¬æ–‡æ¡£è§£é‡Šé¡¹ç›®ä¸­å„ç§æ–‡ä»¶çš„ç”¨é€”å’Œç®¡ç†æ–¹å¼ã€‚

## ğŸ“ ç›®å½•ç»“æ„è§„èŒƒ

### æºç ç›®å½•ï¼ˆéœ€è¦æäº¤åˆ° Gitï¼‰

```
Learn4Go-1/
â”œâ”€â”€ cmd/              # å¯æ‰§è¡Œç¨‹åºå…¥å£
â”œâ”€â”€ internal/         # å†…éƒ¨ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ examples/         # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ web/              # å‰ç«¯é¡µé¢
â”œâ”€â”€ docs/             # æ–‡æ¡£
â”œâ”€â”€ deployments/      # éƒ¨ç½²é…ç½®
â”œâ”€â”€ 01.Goè¯­è¨€åŸºç¡€/    # å­¦ä¹ æ–‡æ¡£
â”œâ”€â”€ 02.å¼€å‘ç¯å¢ƒåŠæ¡†æ¶ä»‹ç»/
â””â”€â”€ 03.é¡¹ç›®å®æˆ˜/
```

### ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼ˆä¸æäº¤åˆ° Gitï¼‰

```
Learn4Go-1/
â”œâ”€â”€ logs/             # è¿è¡Œæ—¥å¿—ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ todoapi.log
â”‚   â”œâ”€â”€ gateway.log
â”‚   â”œâ”€â”€ frontend.log
â”‚   â””â”€â”€ .pids
â”œâ”€â”€ *.db              # SQLite æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ client            # ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶
â”œâ”€â”€ gin               # ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶
â””â”€â”€ todoapi           # ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶
```

## ğŸ—‚ï¸ æ–‡ä»¶ç±»å‹è¯´æ˜

### 1. æ—¥å¿—æ–‡ä»¶ (`.log`)

#### æ˜¯ä»€ä¹ˆï¼Ÿ
è¿è¡Œæ—¶äº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶ï¼Œè®°å½•æœåŠ¡çš„å¯åŠ¨ã€è¯·æ±‚ã€é”™è¯¯ç­‰ä¿¡æ¯ã€‚

#### ä¸ºä»€ä¹ˆäº§ç”Ÿï¼Ÿ
- `start-local.sh` è„šæœ¬ä½¿ç”¨ `nohup` åå°è¿è¡ŒæœåŠ¡
- å°†æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶
- æ–¹ä¾¿è°ƒè¯•å’Œæ’æŸ¥é—®é¢˜

#### å­˜æ”¾ä½ç½®
```
logs/
â”œâ”€â”€ todoapi.log    # TODO API æ—¥å¿—
â”œâ”€â”€ gateway.log    # Gateway æ—¥å¿—
â””â”€â”€ frontend.log   # å‰ç«¯æœåŠ¡å™¨æ—¥å¿—
```

#### å¦‚ä½•æŸ¥çœ‹ï¼Ÿ
```bash
# å®æ—¶æŸ¥çœ‹
tail -f logs/todoapi.log

# æŸ¥çœ‹æœ€å 50 è¡Œ
tail -50 logs/todoapi.log

# æœç´¢é”™è¯¯
grep ERROR logs/todoapi.log
```

#### å¦‚ä½•æ¸…ç†ï¼Ÿ
```bash
# æ¸…ç©ºæ—¥å¿—
> logs/todoapi.log

# åˆ é™¤æ‰€æœ‰æ—¥å¿—
rm -f logs/*.log

# æˆ–åœæ­¢æœåŠ¡åè‡ªåŠ¨æ¸…ç†
./stop-local.sh && rm -rf logs/
```

---

### 2. è¿›ç¨‹ ID æ–‡ä»¶ (`.pids`)

#### æ˜¯ä»€ä¹ˆï¼Ÿ
å­˜å‚¨åå°è¿è¡Œçš„æœåŠ¡è¿›ç¨‹ IDã€‚

#### ä¸ºä»€ä¹ˆäº§ç”Ÿï¼Ÿ
- `start-local.sh` å¯åŠ¨æœåŠ¡åä¿å­˜ PID
- `stop-local.sh` è¯»å– PID æ¥åœæ­¢æœåŠ¡

#### å­˜æ”¾ä½ç½®
```
logs/.pids
```

#### å†…å®¹ç¤ºä¾‹
```bash
TODOAPI_PID=12345
GATEWAY_PID=12346
FRONTEND_PID=12347
```

#### å¦‚ä½•ä½¿ç”¨ï¼Ÿ
```bash
# æŸ¥çœ‹è¿›ç¨‹ ID
cat logs/.pids

# æ‰‹åŠ¨åœæ­¢æŸä¸ªæœåŠ¡
kill $(grep TODOAPI_PID logs/.pids | cut -d= -f2)
```

---

### 3. ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶

#### æ˜¯ä»€ä¹ˆï¼Ÿ
Go ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

#### ä¸ºä»€ä¹ˆäº§ç”Ÿï¼Ÿ
- è¿è¡Œ `go build` å‘½ä»¤æ—¶äº§ç”Ÿ
- é»˜è®¤è¾“å‡ºåˆ°å½“å‰ç›®å½•

#### å¸¸è§æ–‡ä»¶
```
client      # examples/grpc/client ç¼–è¯‘ç»“æœ
server      # examples/grpc/server ç¼–è¯‘ç»“æœ
gin         # examples/gateway/gin ç¼–è¯‘ç»“æœ
gateway     # examples/gateway/stdlib ç¼–è¯‘ç»“æœ
todoapi     # cmd/todoapi ç¼–è¯‘ç»“æœ
```

#### å¦‚ä½•é¿å…ï¼Ÿ
```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ go runï¼ˆä¸ç”Ÿæˆæ–‡ä»¶ï¼‰
go run ./cmd/todoapi

# æ–¹å¼äºŒï¼šæŒ‡å®šè¾“å‡ºç›®å½•
go build -o bin/todoapi ./cmd/todoapi

# æ–¹å¼ä¸‰ï¼šè¾“å‡ºåˆ°ä¸´æ—¶ç›®å½•
go build -o /tmp/todoapi ./cmd/todoapi
```

#### å¦‚ä½•æ¸…ç†ï¼Ÿ
```bash
# åˆ é™¤æ‰€æœ‰äºŒè¿›åˆ¶æ–‡ä»¶
rm -f client server gin gateway todoapi

# æˆ–ä½¿ç”¨é€šé…ç¬¦
rm -f $(find . -maxdepth 1 -type f -perm +111)
```

---

### 4. SQLite æ•°æ®åº“æ–‡ä»¶ (`.db`)

#### æ˜¯ä»€ä¹ˆï¼Ÿ
SQLite æ•°æ®åº“æ–‡ä»¶ï¼Œå­˜å‚¨ TODO æ•°æ®ã€‚

#### ä¸ºä»€ä¹ˆäº§ç”Ÿï¼Ÿ
ä½¿ç”¨ SQLite å­˜å‚¨æ¨¡å¼æ—¶è‡ªåŠ¨åˆ›å»ºï¼š
```bash
TODO_STORAGE=sqlite go run ./cmd/todoapi
```

#### å­˜æ”¾ä½ç½®
```
todo.db          # é»˜è®¤ä½ç½®ï¼ˆå½“å‰ç›®å½•ï¼‰
```

#### å¦‚ä½•æŒ‡å®šä½ç½®ï¼Ÿ
ä¿®æ”¹ä»£ç æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼ˆéœ€è¦ä»£ç æ”¯æŒï¼‰ã€‚

#### å¦‚ä½•æ¸…ç†ï¼Ÿ
```bash
rm -f *.db
```

---

## ğŸš« .gitignore é…ç½®

æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶éƒ½å·²æ·»åŠ åˆ° `.gitignore`ï¼š

```gitignore
# æ—¥å¿—ç›®å½•
logs/
*.log

# è¿›ç¨‹ ID æ–‡ä»¶
.pids

# ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶
/client
/server
/gin
/gateway
/todoapi

# SQLite æ•°æ®åº“
*.db
*.sqlite
*.sqlite3

# ä¸´æ—¶æ–‡ä»¶
/tmp/
nohup.out
```

## ğŸ“‹ æœ€ä½³å®è·µ

### 1. æ—¥å¿—ç®¡ç†

**å¼€å‘ç¯å¢ƒ**ï¼š
- æ—¥å¿—ä¿å­˜åœ¨ `logs/` ç›®å½•
- å®šæœŸæ¸…ç†æ—§æ—¥å¿—
- ä½¿ç”¨ `tail -f` å®æ—¶æŸ¥çœ‹

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
- ä½¿ç”¨æ—¥å¿—è½®è½¬ï¼ˆlogrotateï¼‰
- é›†ä¸­æ—¥å¿—æ”¶é›†ï¼ˆELK/Lokiï¼‰
- è®¾ç½®æ—¥å¿—ä¿ç•™ç­–ç•¥

### 2. äºŒè¿›åˆ¶æ–‡ä»¶ç®¡ç†

**æ¨èåšæ³•**ï¼š
```bash
# å¼€å‘æ—¶ä½¿ç”¨ go runï¼ˆä¸ç”Ÿæˆæ–‡ä»¶ï¼‰
go run ./cmd/todoapi

# æ„å»ºæ—¶æŒ‡å®šè¾“å‡ºç›®å½•
mkdir -p bin
go build -o bin/ ./cmd/...

# æ¸…ç†æ„å»ºäº§ç‰©
go clean
rm -rf bin/
```

### 3. æ•°æ®åº“æ–‡ä»¶ç®¡ç†

**å¼€å‘ç¯å¢ƒ**ï¼š
```bash
# ä½¿ç”¨å†…å­˜æ¨¡å¼ï¼ˆæ— æ–‡ä»¶ï¼‰
go run ./cmd/todoapi

# æˆ–æŒ‡å®šæ•°æ®åº“ä½ç½®
mkdir -p data
TODO_STORAGE=sqlite TODO_DB_PATH=data/todo.db go run ./cmd/todoapi
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
- ä½¿ç”¨ MySQL/PostgreSQL
- å®šæœŸå¤‡ä»½æ•°æ®åº“
- ä¸ä½¿ç”¨ SQLite

## ğŸ§¹ æ¸…ç†å‘½ä»¤

### æ¸…ç†æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶

```bash
# åœæ­¢æœåŠ¡
./stop-local.sh

# æ¸…ç†æ—¥å¿—
rm -rf logs/

# æ¸…ç†äºŒè¿›åˆ¶æ–‡ä»¶
rm -f client server gin gateway todoapi

# æ¸…ç†æ•°æ®åº“
rm -f *.db

# æ¸…ç† Go ç¼“å­˜
go clean -cache -modcache
```

### ä¸€é”®æ¸…ç†è„šæœ¬

é¡¹ç›®å·²æä¾› `clean.sh` è„šæœ¬ï¼Œå¯ä¸€é”®æ¸…ç†æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶ï¼š

```bash
# è¿è¡Œæ¸…ç†è„šæœ¬
./clean.sh
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- åœæ­¢æ‰€æœ‰è¿è¡Œä¸­çš„æœåŠ¡
- æ¸…ç† `logs/` ç›®å½•
- åˆ é™¤ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶
- åˆ é™¤æ•°æ®åº“æ–‡ä»¶
- åˆ é™¤å…¶ä»–ä¸´æ—¶æ–‡ä»¶
- æ˜¾ç¤ºæ¸…ç†åçš„çŠ¶æ€

## ğŸ“Š æ–‡ä»¶å¤§å°å‚è€ƒ

| æ–‡ä»¶ç±»å‹ | å¤§å° | è¯´æ˜ |
|---------|------|------|
| æ—¥å¿—æ–‡ä»¶ | å‡  KB - å‡  MB | å–å†³äºè¿è¡Œæ—¶é—´ |
| äºŒè¿›åˆ¶æ–‡ä»¶ | 10-20 MB | Go ç¼–è¯‘ç»“æœ |
| SQLite æ•°æ®åº“ | å‡  KB - å‡  MB | å–å†³äºæ•°æ®é‡ |

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šæ—¥å¿—æ–‡ä»¶è¿‡å¤§

```bash
# æŸ¥çœ‹æ—¥å¿—å¤§å°
du -sh logs/

# æ¸…ç©ºæ—¥å¿—
> logs/todoapi.log
> logs/gateway.log
> logs/frontend.log
```

### é—®é¢˜ï¼šäºŒè¿›åˆ¶æ–‡ä»¶å ç”¨ç©ºé—´

```bash
# æŸ¥çœ‹å¤§å°
ls -lh client gin gateway todoapi

# åˆ é™¤
rm -f client gin gateway todoapi
```

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° .pids æ–‡ä»¶

```bash
# æ‰‹åŠ¨åœæ­¢æœåŠ¡
pkill -f "go run"
pkill -f "python3 -m http.server"
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æœ¬åœ°å¼€å‘æŒ‡å—](LOCAL_DEVELOPMENT.md) - æœ¬åœ°å¯åŠ¨è¯¦ç»†æ­¥éª¤
- [FAQ](FAQ.md) - å¸¸è§é—®é¢˜è§£ç­”
- [README.md](../README.md) - é¡¹ç›®æ€»è§ˆ

---

**å»ºè®®**: å®šæœŸè¿è¡Œ `./clean.sh` æ¸…ç†ä¸´æ—¶æ–‡ä»¶ã€‚
